<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Dashboard</title>
        <link rel="stylesheet" href="css/dashboard.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    </head>
    <body>
        <nav>
            <img src="images/logo.png" alt="Logo">
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="create_member.html">Create New Client</a></li>
                <li><a href="create_loan.html">Create New Loan</a></li>
                <li><a href="#">Loan Repayment</a></li>
                <li><a href="logout.php">Logout</a></li>
            </ul>
        </nav>

        <h2>Optifluence Loan Manager Dashboard</h2>

        <div id="charts">
            <div class="chart-container">
                <h3>Loans Issued</h3>
                <canvas id="loansChart" width="400" height="200"></canvas>
                <button onclick="downloadChart('loansChart')">Download Chart</button>
            </div>

            <div class="chart-container">
                <h3>Top Borrowers</h3>
                <canvas id="top-borrowers-chart" width="400" height="200"></canvas>
                <button onclick="downloadChart('top-borrowers-chart')">Download Chart</button>
            </div>

            <div class="chart-container">
                <h3>Loans in Arrears</h3>
                <canvas id="arrears-chart" width="400" height="200"></canvas>
                <button onclick="downloadChart('arrears-chart')">Download Chart</button>
            </div>
        </div>

        <div id="loans-table-container">
            <h3>All Loans</h3>
            <button onclick="exportTableToCSV('loans.csv')">Download CSV</button>
            <input type="text" id="search-input" placeholder="Search loans..." onkeyup="searchLoans()">
            <table id="loans-table">
                <thead>
                    <tr>
                        <th>Loan Number</th>
                        <th>Borrower</th>
                        <th>Status</th>
                        <th>Loan Date</th>
                        <th>Due Date</th>
                        <th>Loan Amount</th>
                        <th>Total Penalties</th>
                        <th>Total Repayments</th>
                        <th>Loan Balance</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Rows will be populated here -->
                </tbody>
            </table>
        </div>

    <script src="scripts/dashboard.js"></script>
</body>
</html>